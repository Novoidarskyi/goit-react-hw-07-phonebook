(this["webpackJsonpgoit-react-hw-07-phonebook"]=this["webpackJsonpgoit-react-hw-07-phonebook"]||[]).push([[0],{19:function(t,e,n){t.exports={header:"AddContactForm_header__10jlb composes_header__3LcMd",form:"AddContactForm_form__1F84p",input:"AddContactForm_input__2-nuH composes_input__1oNON",button:"AddContactForm_button__VuypO composes_button__1fnVW",label:"AddContactForm_label__2_g8s"}},29:function(t,e,n){t.exports={listItem:"ContactListItem_listItem__2KRw2",button:"ContactListItem_button__1wXYG composes_button__1fnVW",buttonFetching:"ContactListItem_buttonFetching__25j-g composes_button__1fnVW"}},33:function(t,e,n){t.exports={header:"ContactList_header__3_5Ig composes_header__3LcMd"}},35:function(t,e,n){t.exports={header:"FindForm_header__GLNeU composes_header__3LcMd",input:"FindForm_input__3S4tl composes_input__1oNON"}},47:function(t,e,n){t.exports={container:"Phonebook_container__WPvyv"}},54:function(t,e,n){},79:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n.n(c),o=n(23),r=n.n(o),s=(n(54),n(38)),i=n(28),u=n(19),d=n.n(u),l=(n(37),n(22)),b=n(26),j=n.n(b),m=n(11),h=n(41),_=n(17),p=n(10),O=n(42),f=n(8),x=n(2),g=Object(x.b)("changeFilter"),F=Object(x.d)("",Object(_.a)({},g,(function(t,e){return e.payload}))),N=Object(O.a)({reducerPath:"contactApi",baseQuery:Object(f.d)({baseUrl:"https://61328c92ab7b1e001799b53c.mockapi.io/"}),tagTypes:["contact"],keepUnusedDataFor:30,endpoints:function(t){return{getContact:t.query({query:function(){return"contacts"},providesTags:["contact"]}),deleteContact:t.mutation({query:function(t){return{url:"contacts/".concat(t),method:"DELETE"}},invalidatesTags:["contact"]}),addContact:t.mutation({query:function(t){return{url:"contacts",method:"POST",body:t}},invalidatesTags:["contact"]})}}}),y=N.useGetContactQuery,C=N.useDeleteContactMutation,v=N.useAddContactMutation,L=Object(p.b)(Object(_.a)({filter:F},N.reducerPath,N.reducer)),w=n(3),E=function(){var t=y().data,e=v(),n=Object(i.a)(e,2),a=n[0],o=n[1],r=o.isLoading,u=o.error;Object(c.useEffect)((function(){u&&m.c.error("\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 ".concat(u.status,", \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 ").concat(u.data))}),[u]);var b=Object(h.a)(500,(function(t){m.c.error(t)}));return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h1",{className:d.a.header,children:"Phonebook"}),Object(w.jsx)(l.c,{initialValues:{name:"",tel:""},onSubmit:function(e,n){var c;c=e.name,t.map((function(t){return t.name})).includes(c)?m.c.error("\u0422\u0430\u043a\u043e\u0439 \u043a\u043e\u043d\u0442\u0430\u043a\u0442 \u0443\u0436\u0435 \u0435\u0441\u0442\u044c"):(a(Object(s.a)({},e)),m.c.success("\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e")),n.resetForm()},children:function(t){var e=t.errors,n=t.touched;return Object(w.jsxs)(l.b,{className:d.a.form,children:[Object(w.jsx)("label",{className:d.a.label,htmlFor:"name",children:"Name"}),Object(w.jsx)(l.a,{className:d.a.input,id:"name",name:"name",placeholder:"Enter name"}),n.name&&e.name&&b(e.name),Object(w.jsx)("label",{className:d.a.label,htmlFor:"tel",children:"Phone"}),Object(w.jsx)(l.a,{className:d.a.input,id:"tel",name:"tel",placeholder:"Enter phone number"}),n.tel&&e.tel&&b(e.tel),Object(w.jsx)("button",{className:d.a.button,type:"submit",disabled:r,children:r?Object(w.jsx)(j.a,{type:"TailSpin",color:"#fff",height:12,width:12,timeout:3e3}):"add"})]})}})]})},T=n(33),k=n.n(T),I=n(90),A=n(29),P=n.n(A),M=n(36),S=function(t){var e,n=t.contact,a=C(),o=Object(i.a)(a,2),r=o[0],s=o[1],u=s.isLoading,d=s.error;return Object(c.useEffect)((function(){d&&m.b.error("\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 ".concat(d.status,", \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 ").concat(d.data))}),[d]),Object(w.jsxs)("li",{className:P.a.listItem,children:[Object(w.jsx)("span",{children:n.name}),Object(w.jsx)("span",{children:n.tel}),Object(w.jsxs)("button",{className:u?P.a.buttonFetching:P.a.button,type:"button",onClick:(e=n.id,function(){return m.b.success("\u0423\u0434\u0430\u043b\u0435\u043d\u043e",{icon:Object(M.a)({color:"rgb(245, 210, 13)",size:"20"})}),r(e)}),disabled:u,children:[u?Object(w.jsx)(j.a,{type:"TailSpin",color:"#fff",height:12,width:12}):"delete",!u&&Object(w.jsx)(M.a,{size:"16"})]})]})},V=n(7),q=function(t){return t.filter},W=function(){var t,e,n=y(),a=n.data,o=n.isFetching,r=n.error,s=Object(V.e)(q),i=(e=s,(t=a)?t.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())})):[]);return Object(c.useEffect)((function(){r&&m.b.error("\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 ".concat(r.status,", \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 ").concat(r.data))}),[r]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h2",{className:k.a.header,children:"Your contacts"}),o&&Object(w.jsx)(I.a,{style:{marginTop:"20px"}}),Object(w.jsx)("ul",{className:k.a.list,children:i.map((function(t){return Object(w.jsx)(S,{contact:t},t.id)}))})]})},D=n(35),G=n.n(D),U=function(){var t=Object(V.e)((function(t){return t.filter})),e=Object(V.d)();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h2",{className:G.a.header,children:"Find by name"}),Object(w.jsx)("input",{className:G.a.input,type:"text",onChange:function(t){e(g(t.target.value))},value:t,placeholder:"Enter to find"})]})},z=n(47),J=n.n(z),Q=function(){return Object(w.jsxs)("div",{className:J.a.container,children:[Object(w.jsx)(E,{}),Object(w.jsx)(U,{}),Object(w.jsx)(W,{}),Object(w.jsx)(m.a,{position:"top-right"})]})},Y=function(){return Object(w.jsx)(Q,{})},B=Object(x.a)({reducer:L,devTools:!1,middleware:function(t){return t().concat(N.middleware)}});r.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(V.a,{store:B,children:Object(w.jsx)(Y,{})})}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.4084da67.chunk.js.map